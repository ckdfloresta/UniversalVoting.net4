<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" type="text/css" href="css/login.css">
    <script src="scripts/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="scripts/wcfscript.js"></script>
    <title>UVS App</title>
</head>
<body bgcolor="#1e73ff">
    <h1 class="title">UVS App</h1>
    <hr width="70%">
    <h5 class="subtitle">Universal Voting System</h5>
    <br />
    <br />
    <div style="text-align:center;">
        <input placeholder="USERNAME" id="txtUsername" type="text" />
        <br />
        <input placeholder="PASSWORD" id="txtPassword" type="password" />
        <br />
        <button id="btnLogin" onclick="loginbutton_OnClick()">Login</button>
        <br />
        <br />
        <a href="createevent.html">You don't have an account? Create an Event.</a>
    </div>
    <script>
        function loginbutton_OnClick() {
            
            var struname = "";
            var strpass = "";

            struname = document.getElementById("txtUsername").value;
            strpass = document.getElementById("txtPassword").value;

            if ((struname.length < 1) || (strpass.length < 1)) {
                alert("MESSAGE: Please enter Valid Input");
            }
            else {
                {
                    alert("Success")
                }
                //$.ajaxSetup({
                //    headers: { "Authorization": "Basic " + btoa("testlocal:testlocal") }
                //});

                $.ajax({
                    type: "POST",
                    url: "http://localhost/COE184P/Service.svc/GetProgramInformation",
                    data:
                    "{" +
                    "\"ProgramCode\"😕"" + strProgramCode.trim() + "\"," +
                    "\"ProgramType\"😕"" + strProgramType.trim() + "\"" +
                    "}"
                    ,
                    contentType: "application/json;charset=utf-8",
                    dataType: "json",
                    processdata: true,
                    beforeSend: function (xhr) {
                        xhr.setRequestHeader("Authorization", "Basic " + btoa("testlocal:testlocal"));
                    },
                    success: function (result) {

                        var varResult = "";
                        var varArResult = result.GetProgramInformationResult;
                        for (var intCtr in varArResult) {
                            varResult +=
                                "Program Code: " + varArResult[intCtr].ProgramCode.toString().trim() + "\n" +
                                "Program Title: " + varArResult[intCtr].ProgramTitle.toString().trim() + "\n" +
                                "Program Type: " + varArResult[intCtr].ProgramType.toString().trim() + "\n" +
                                "Program Full Name: " + varArResult[intCtr].ProgramFullName.toString().trim() + "\n";
                        }
                        alert(varResult);

                        window.location.href = "about.html";
                    },
                    error: function (msg) {
                        alert(msg.responseText);
                    }
                });
            }
        }
        </script>
</body >
</html >


<script>
            $(document).ready(function () {
                $("button").click(function () {
                    $.ajax({
                        url: "https://httpbin.org/post",
                        method: "POST",
                        data: {
                            username: 'hello',
                            anotherdata: 'yourdata',
                        },
                        error: function (error) {
                            alert('failed to post ' + error.status);
                            console.log(error);
                        },
                        success: function (result) {
                            console.log(result);
                            $("#div1").html(JSON.stringify(result.form));
                        }
                    });
                });
            });
    </script>